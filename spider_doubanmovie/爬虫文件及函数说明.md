## 爬虫文件及函数说明

explore文件夹下存放初期的探索过程

complete文件夹下存放最终成功的代码文件

movieinfo.sql是数据库文件

### 整个爬虫过程

1. 构造豆瓣电影top250的每个分页（改变start参数）
2. 进入每一个分页提取当前分页下25部电影的url
3. 进入url使用XPath筛选电影有效信息进行提取
4. 将信息通过pymysql模块的sql语句操作将信息存入mysql

### 文件架构

complete文件夹下有movie.py和main.py

### movieinfo类

之所以构造成一个类是因为每次提取信息都要用到当前电影网页的html文本，将其作为所有函数的参数**显然不够优雅**。

所以写了一个movieinfo类，init接受url参数对网页进行访问获得html文本，这样类内的函数都可以用到这个html而不用多设置一个html参数。

本身类内函数都**设置了返回值**，但是当我要用sql语句将信息存进去的时候，觉得data里元素**带个()不够优雅**。（找不到图了）

因此我把电影的各种信息设为类内属性，相应地对类内函数进行改写，去除return语句，给类设置属性。同时init函数下调用这些函数达到效果。

![image-20210422184002444](https://horacehhtbucket.oss-cn-guangzhou.aliyuncs.com/img/image-20210422184002444.png)

![image-20210422184022653](https://horacehhtbucket.oss-cn-guangzhou.aliyuncs.com/img/image-20210422184022653.png)